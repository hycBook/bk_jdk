<!DOCTYPE HTML>
<html lang="zh-hans">
<head>
<meta charset="utf-8"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Spring注解_Spring入门篇 · Java相关学习记录</title>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="" name="description"/>
<meta content="GitBook 3.2.3" name="generator"/>
<meta content="narutohyc" name="author"/>
<link href="../gitbook/style.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-splitter/splitter.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-anchors/plugin.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-donate/plugin.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-code/plugin.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-search-plus/search.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-lightbox/css/lightbox.min.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-change_girls/girls.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-pageview-count/plugin.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-highlight/website.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-fontsettings/website.css" rel="stylesheet"/>
<link href="../gitbook/gitbook-plugin-theme-comscore/test.css" rel="stylesheet"/>
<meta content="true" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<link href="../gitbook/images/apple-touch-icon-precomposed-152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/>
<link href="../gitbook/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="Java基础.md" rel="next"/>
<link href="Spring注解_常用注解.html" rel="prev"/>
<link href="./chapters/res/other/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="./chapters/res/other/favicon.ico" rel="apple-touch-icon-precomposed" sizes="152x152"/>
<style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
<script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"narutohyc","repo":"bk_jdk","type":"star","size":"small","count":true}]};
    </script>
</head>
<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input placeholder="输入并搜索" type="text"/>
</div>
<nav role="navigation">
<ul class="summary">
<li>
<a class="custom-link" href="https://github.com/narutohyc" target="_blank">我的狗窝</a>
</li>
<li class="divider"></li>
<li class="chapter" data-level="1.1" data-path="../">
<a href="../">
<b>1.1.</b>
                    
                    Introduction
            
                </a>
</li>
<li class="chapter" data-level="1.2" data-path="设计模式.html">
<a href="设计模式.html">
<b>1.2.</b>
                    
                    设计模式
            
                </a>
</li>
<li class="chapter" data-level="1.3" data-path="多线程.md">
<span>
<b>1.3.</b>
                    
                    多线程
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.3.1" data-path="多线程_基础篇.html">
<a href="多线程_基础篇.html">
<b>1.3.1.</b>
                    
                    多线程_基础篇
            
                </a>
</li>
<li class="chapter" data-level="1.3.2" data-path="多线程_锁.html">
<a href="多线程_锁.html">
<b>1.3.2.</b>
                    
                    多线程_锁
            
                </a>
</li>
<li class="chapter" data-level="1.3.3" data-path="多线程_JUC原子类.html">
<a href="多线程_JUC原子类.html">
<b>1.3.3.</b>
                    
                    多线程_JUC原子类
            
                </a>
</li>
<li class="chapter" data-level="1.3.4" data-path="多线程_JUC锁集合.html">
<a href="多线程_JUC锁集合.html">
<b>1.3.4.</b>
                    
                    多线程_JUC锁集合
            
                </a>
</li>
<li class="chapter" data-level="1.3.5" data-path="多线程_JUC集合.md">
<span>
<b>1.3.5.</b>
                    
                    多线程_JUC集合
            
                
            

            
        </span></li>
<li class="chapter" data-level="1.3.6" data-path="多线程_JUC线程池.html">
<a href="多线程_JUC线程池.html">
<b>1.3.6.</b>
                    
                    多线程_JUC线程池
            
                </a>
</li>
<li class="chapter" data-level="1.3.7" data-path="多线程_生产者消费者.html">
<a href="多线程_生产者消费者.html">
<b>1.3.7.</b>
                    
                    多线程_生产者消费者
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.4" data-path="IDEA快捷键.html">
<a href="IDEA快捷键.html">
<b>1.4.</b>
                    
                    IDEA快捷键
            
                </a>
</li>
<li class="chapter" data-level="1.5" data-path="Spring注解.md">
<span>
<b>1.5.</b>
                    
                    Spring注解
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.5.1" data-path="Spring注解_介绍.html">
<a href="Spring注解_介绍.html">
<b>1.5.1.</b>
                    
                    Spring注解_介绍
            
                </a>
</li>
<li class="chapter" data-level="1.5.2" data-path="Spring注解_常用注解.html">
<a href="Spring注解_常用注解.html">
<b>1.5.2.</b>
                    
                    Spring注解_常用注解
            
                </a>
</li>
<li class="chapter active" data-level="1.5.3" data-path="Spring注解_Spring入门篇.html">
<a href="Spring注解_Spring入门篇.html">
<b>1.5.3.</b>
                    
                    Spring注解_Spring入门篇
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.6" data-path="Java基础.md">
<span>
<b>1.6.</b>
                    
                    Java基础
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.6.1" data-path="Java基础_集合.html">
<a href="Java基础_集合.html">
<b>1.6.1.</b>
                    
                    Java基础_集合
            
                </a>
</li>
<li class="chapter" data-level="1.6.2" data-path="Java基础_泛型.html">
<a href="Java基础_泛型.html">
<b>1.6.2.</b>
                    
                    Java基础_泛型
            
                </a>
</li>
<li class="chapter" data-level="1.6.3" data-path="Java基础_打jar包.html">
<a href="Java基础_打jar包.html">
<b>1.6.3.</b>
                    
                    Java基础_打jar包
            
                </a>
</li>
<li class="chapter" data-level="1.6.4" data-path="Java基础_正则匹配.html">
<a href="Java基础_正则匹配.html">
<b>1.6.4.</b>
                    
                    Java基础_正则匹配
            
                </a>
</li>
<li class="chapter" data-level="1.6.5" data-path="Java基础_反射机制.html">
<a href="Java基础_反射机制.html">
<b>1.6.5.</b>
                    
                    Java基础_反射机制
            
                </a>
</li>
<li class="chapter" data-level="1.6.6" data-path="Java基础_对象正反序列化.html">
<a href="Java基础_对象正反序列化.html">
<b>1.6.6.</b>
                    
                    Java基础_对象正反序列化
            
                </a>
</li>
<li class="chapter" data-level="1.6.7" data-path="Java基础_读取配置文件.html">
<a href="Java基础_读取配置文件.html">
<b>1.6.7.</b>
                    
                    Java基础_读取配置文件
            
                </a>
</li>
<li class="chapter" data-level="1.6.8" data-path="Java基础_解析与生成XML.html">
<a href="Java基础_解析与生成XML.html">
<b>1.6.8.</b>
                    
                    Java基础_解析与生成XML
            
                </a>
</li>
<li class="chapter" data-level="1.6.9" data-path="Java基础_后台服务器开发.html">
<a href="Java基础_后台服务器开发.html">
<b>1.6.9.</b>
                    
                    Java基础_后台服务器开发
            
                </a>
</li>
<li class="chapter" data-level="1.6.10" data-path="Java基础_四舍五入.html">
<a href="Java基础_四舍五入.html">
<b>1.6.10.</b>
                    
                    Java基础_四舍五入
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.7" data-path="Java进阶.md">
<span>
<b>1.7.</b>
                    
                    Java进阶
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.7.1" data-path="Java进阶_反射.html">
<a href="Java进阶_反射.html">
<b>1.7.1.</b>
                    
                    Java进阶_反射
            
                </a>
</li>
<li class="chapter" data-level="1.7.2" data-path="Java进阶_注解.html">
<a href="Java进阶_注解.html">
<b>1.7.2.</b>
                    
                    Java进阶_注解
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.8" data-path="MySQL.md">
<span>
<b>1.8.</b>
                    
                    MySQL
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.8.1" data-path="MySQL_基础.html">
<a href="MySQL_基础.html">
<b>1.8.1.</b>
                    
                    MySQL_基础
            
                </a>
</li>
<li class="chapter" data-level="1.8.2" data-path="MySQL_约束.html">
<a href="MySQL_约束.html">
<b>1.8.2.</b>
                    
                    MySQL_约束
            
                </a>
</li>
<li class="chapter" data-level="1.8.3" data-path="MySQL_多表查询.html">
<a href="MySQL_多表查询.html">
<b>1.8.3.</b>
                    
                    MySQL_多表查询
            
                </a>
</li>
<li class="chapter" data-level="1.8.4" data-path="MySQL_事务.html">
<a href="MySQL_事务.html">
<b>1.8.4.</b>
                    
                    MySQL_事务
            
                </a>
</li>
<li class="chapter" data-level="1.8.5" data-path="MySQL_数据库设计.html">
<a href="MySQL_数据库设计.html">
<b>1.8.5.</b>
                    
                    MySQL_数据库设计
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.9" data-path="JDBC.md">
<span>
<b>1.9.</b>
                    
                    JDBC
            
                
            

            
            <ul class="articles">
<li class="chapter" data-level="1.9.1" data-path="JDBC_JDBC基础.html">
<a href="JDBC_JDBC基础.html">
<b>1.9.1.</b>
                    
                    JDBC_JDBC基础
            
                </a>
</li>
<li class="chapter" data-level="1.9.2" data-path="JDBC_JDBC连接池.html">
<a href="JDBC_JDBC连接池.html">
<b>1.9.2.</b>
                    
                    JDBC_JDBC连接池
            
                </a>
</li>
<li class="chapter" data-level="1.9.3" data-path="JDBC_JDBCTemplate.html">
<a href="JDBC_JDBCTemplate.html">
<b>1.9.3.</b>
                    
                    JDBC_JDBCTemplate
            
                </a>
</li>
</ul>
</span></li>
<li class="chapter" data-level="1.10" data-path="Spark集群搭建.html">
<a href="Spark集群搭建.html">
<b>1.10.</b>
                    
                    Spark集群搭建
            
                </a>
</li>
<li class="divider"></li>
<li>
<a class="gitbook-link" href="https://www.gitbook.com" target="blank">
            本书使用 GitBook 发布
        </a>
</li>
</ul>
</nav>
</div>
<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">
<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="..">Spring注解_Spring入门篇</a>
</h1>
</div>
<div class="page-wrapper" role="main" tabindex="-1">
<div class="page-inner">
<div class="search-plus" id="book-search-results">
<div class="search-noresults">
<section class="normal markdown-section">
<div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon"></span><a href="#spring入门篇">1 Spring入门篇</a></li><li><span class="title-icon"></span><a href="#概述">2 概述</a></li><li><span class="title-icon"></span><a href="#spring-ioc容器">3 Spring IOC容器</a></li><ul><li><span class="title-icon"></span><a href="#接口及面向接口编程">3.1 接口及面向接口编程</a></li><li><span class="title-icon"></span><a href="#bean容器初始化">3.2 Bean容器初始化</a></li><li><span class="title-icon"></span><a href="#spring的常用注入方式">3.3 Spring的常用注入方式</a></li></ul><li><span class="title-icon"></span><a href="#spring-bean装配">4 Spring Bean装配</a></li><ul><li><span class="title-icon"></span><a href="#bean的生命周期">4.1 Bean的生命周期</a></li><li><span class="title-icon"></span><a href="#aware接口">4.2 Aware接口</a></li><li><span class="title-icon"></span><a href="#bean的自动装配">4.3 Bean的自动装配</a></li><li><span class="title-icon"></span><a href="#bean的resources">4.4 Bean的Resources</a></li><li><span class="title-icon"></span><a href="#bean的定义及作用域">4.5 Bean的定义及作用域</a></li><li><span class="title-icon"></span><a href="#autowired注解说明">4.6 Autowired注解说明</a></li><li><span class="title-icon"></span><a href="#qualifier注解">4.7 @Qualifier注解</a></li><li><span class="title-icon"></span><a href="#基于java的容器注解">4.8 基于Java的容器注解</a></li><li><span class="title-icon"></span><a href="#基于泛型的装配">4.9 基于泛型的装配</a></li><li><span class="title-icon"></span><a href="#jsr支持说明">4.10 JSR支持说明</a></li></ul><li><span class="title-icon"></span><a href="#spring-aop基本概念">5 Spring AOP基本概念</a></li><ul><li><span class="title-icon"></span><a href="#aop基本概念和特点">5.1 AOP基本概念和特点</a></li><li><span class="title-icon"></span><a href="#配置切面和切入点">5.2 配置切面和切入点</a></li><li><span class="title-icon"></span><a href="#advice应用">5.3 Advice应用</a></li><li><span class="title-icon"></span><a href="#introduction应用">5.4 Introduction应用</a></li><li><span class="title-icon"></span><a href="#advisors">5.5 Advisors</a></li></ul></ul></div><a href="#spring入门篇" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><p><a data-lightbox="f023c780-dd55-45a1-96bf-2ecc823a000e" data-title="img" href="res/other/异世界蕾姆_1.png"><img alt="img" src="res/other/异世界蕾姆_1.png"/></a></p>
<p><li><span class="title-icon"></span><a href="#spring入门篇">1 Spring入门篇</a></li><li><span class="title-icon"></span><a href="#概述">2 概述</a></li><li><span class="title-icon"></span><a href="#spring-ioc容器">3 Spring IOC容器</a></li><ul><li><span class="title-icon"></span><a href="#接口及面向接口编程">3.1 接口及面向接口编程</a></li><li><span class="title-icon"></span><a href="#bean容器初始化">3.2 Bean容器初始化</a></li><li><span class="title-icon"></span><a href="#spring的常用注入方式">3.3 Spring的常用注入方式</a></li></ul><li><span class="title-icon"></span><a href="#spring-bean装配">4 Spring Bean装配</a></li><ul><li><span class="title-icon"></span><a href="#bean的生命周期">4.1 Bean的生命周期</a></li><li><span class="title-icon"></span><a href="#aware接口">4.2 Aware接口</a></li><li><span class="title-icon"></span><a href="#bean的自动装配">4.3 Bean的自动装配</a></li><li><span class="title-icon"></span><a href="#bean的resources">4.4 Bean的Resources</a></li><li><span class="title-icon"></span><a href="#bean的定义及作用域">4.5 Bean的定义及作用域</a></li><li><span class="title-icon"></span><a href="#autowired注解说明">4.6 Autowired注解说明</a></li><li><span class="title-icon"></span><a href="#qualifier注解">4.7 @Qualifier注解</a></li><li><span class="title-icon"></span><a href="#基于java的容器注解">4.8 基于Java的容器注解</a></li><li><span class="title-icon"></span><a href="#基于泛型的装配">4.9 基于泛型的装配</a></li><li><span class="title-icon"></span><a href="#jsr支持说明">4.10 JSR支持说明</a></li></ul><li><span class="title-icon"></span><a href="#spring-aop基本概念">5 Spring AOP基本概念</a></li><ul><li><span class="title-icon"></span><a href="#aop基本概念和特点">5.1 AOP基本概念和特点</a></li><li><span class="title-icon"></span><a href="#配置切面和切入点">5.2 配置切面和切入点</a></li><li><span class="title-icon"></span><a href="#advice应用">5.3 Advice应用</a></li><li><span class="title-icon"></span><a href="#introduction应用">5.4 Introduction应用</a></li><li><span class="title-icon"></span><a href="#advisors">5.5 Advisors</a></li></ul></p>
<h1 id="spring入门篇">1 Spring入门篇</h1>
<blockquote>
<p><a href="https://www.imooc.com/learn/196" target="_blank">那些年，让我们一起着迷的Spring</a></p>
<p><a href="http://spring.io" target="_blank">http://spring.io</a></p>
<p><a href="https://spring.io/projects/spring-framework" target="_blank">https://spring.io/projects/spring-framework</a></p>
</blockquote>
<h1 id="概述">2 概述</h1>
<blockquote>
<p>spring是一个开源框架，是一个轻量级的控制反转(IOC)和面向切面（AOP)的容器框架 </p>
<ul>
<li><p>-从大小与开销两方面而言Spring都是轻量的 </p>
</li>
<li><p>-通过控制反转（IoC）的技术达到松耦合的目的 </p>
</li>
<li><p>-提供了面向切面编程的丰富支持，允许通过分离应用的业务逻辑与系统级服务进行内聚性的开发 </p>
</li>
<li><p>-包含并管理应用对象的配置和生命周期，这个意义上是一种容器 </p>
</li>
<li><p>-将简单的组件配置、组合成为复杂的应用，这个意义上是框架 </p>
</li>
</ul>
<p><a data-lightbox="0c0a7415-f574-4f92-bda7-cb1b8552208c" data-title="spring framework runtime结构图" href="res/Java%20And%20Spring%20Annotation/spring%20framework%20runtime.png"><img alt="spring framework runtime结构图" src="res/Java%20And%20Spring%20Annotation/spring%20framework%20runtime.png"/></a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&amp;mid=2247486373&amp;idx=1&amp;sn=601720b8a9dc1af60ffe6b2bd1dfc917&amp;scene=21#wechat_redirect" target="_blank">Java 程序员必须掌握的 5 个注解！</a></p>
<p><strong>Spring作用</strong></p>
<ul>
<li>容器 ·</li>
<li>提供了对多种技术的支持 -JMS -MQ支持 -UnitTest </li>
<li>AOP（事务管理、日志等） ·</li>
<li>提供了众多方便应用的辅助类（JDBC Template等） ·</li>
<li>对主流应用框架（Hibernate等）提供了良好的支持</li>
</ul>
<p><strong>适用范围</strong></p>
<ul>
<li>构建企业应用（SpringMVC+Spring+Hibernate/ibatis) </li>
<li>单独使用Bean容器（Bean管理） </li>
<li>单独使用AOP进行切面处理 </li>
<li>其他的Spring功能，如：对消息的支持等 在互联网中的应用</li>
</ul>
<p><strong>什么是框架</strong></p>
<ul>
<li><p>·框架的特点 </p>
<ul>
<li><p>-半成品 -封装了特定的处理流程和控制逻辑 </p>
</li>
<li><p>-成熟的、不断升级改进的软件 </p>
</li>
</ul>
</li>
<li><p>·框架与类库的区别 </p>
<ul>
<li><p>-框架一般是封装了逻辑、高内聚的，类库则是松散的工具组合 </p>
</li>
<li><p>-框架专注于某一领域，类库则是更通用的 </p>
</li>
</ul>
</li>
</ul>
<p><strong>为什么使用框架</strong></p>
<ul>
<li>·软件系统日趋复杂 </li>
<li>·重用度高，开发效率和质量提高 </li>
<li>·软件设计人员要专注于对领域的了解，使需求分析更充分 ·易于上手、快速解决问题 </li>
</ul>
</blockquote>
<h1 id="spring-ioc容器">3 Spring IOC容器</h1>
<h2 id="接口及面向接口编程">3.1 接口及面向接口编程</h2>
<blockquote>
<p><strong>接口</strong></p>
<ul>
<li>·用于沟通的中介物的抽象化 </li>
<li>·实体把自己提供给外界的一种抽象化说明，用以由内部操作分 离出外部沟通方法，使其能被修改内部而不影响外界其他实体 与其交互的方式 </li>
<li>·对应Java接口即声明，声明了哪些方法是对外公开提供的 </li>
<li>·在Java8中，接口可以拥有方法体 </li>
</ul>
<p><strong>面向接口编程</strong></p>
<ul>
<li>结构设计中，分清层次及调用关系，每层只向外（上层）提供 一组功能接口，各层间仅依赖接口而非实现类 </li>
<li>接口实现的变动不影响各层间的调用，这一点在公共服务中尤为重要 </li>
<li>“面向接口编程”中的“接口”是用于隐藏具体实现和实现多态性的组件</li>
</ul>
<p><strong>什么是IOC</strong></p>
<ul>
<li>IOC:控制反转，控制权的转移，应用程序本身不负责依赖对象的创建和维护，而是由外部容器负责创建和维护 </li>
<li>DI（依赖注入）是其一种实现方式 </li>
<li>目的：创建对象并且组装对象之间的关系 </li>
</ul>
<p><a data-lightbox="f179d027-2cb4-4e86-8c4f-ec3377acb575" data-title="IoC container结构图" href="res/Java%20And%20Spring%20Annotation/IoC%20container.png"><img alt="IoC container结构图" src="res/Java%20And%20Spring%20Annotation/IoC%20container.png"/></a></p>
<p><strong>扩展理解</strong></p>
<ul>
<li>2004年，Martin Fowler探讨了同一个问题，既然IOC是控制 反转，那么到底是“哪些方面的控制被反转了呢？”，经过详 细地分析和论证后，他得出了答案：“获得依赖对象的过程被 反转了”。控制被反转之后，获得依赖对象的过程由自身管理 变为了由IOC容器主动注入。于是，他给“控制反转”取了一 个更合适的名字叫做“依赖注入（Dependency Injection) "。他的这个答案，实际上给出了实现IOC的方法：注入。所 谓依赖注入，就是由IOC容器在运行期间，动态地将某种依赖 关系注入到对象之中。</li>
</ul>
<p><strong>单元测试</strong></p>
<ul>
<li>下载junit-*.jar并引入工程 </li>
<li>创建UnitTestBase类，完成对Spring配置文件的加载、销毁 所有的单元测试类都继承自UnitTestBase，通过它的 getBean方法获取想要得到的对象 </li>
<li>子类（具体执行单元测试的类）加注解： @RunWith(BlockJUnit4ClassRunner.class) </li>
<li>单元测试方法加注解：@Test </li>
<li>右键选择要执行的单元测试方法执行或者执行一个类的全部单 元测试方法 </li>
</ul>
</blockquote>
<h2 id="bean容器初始化">3.2 Bean容器初始化</h2>
<blockquote>
<p><strong>基础：两个包 </strong></p>
<ul>
<li><p>-org.springframework.beans </p>
</li>
<li><p>-org.springframework.context </p>
</li>
<li><p>-BeanFactory提供配置结构和基本功能，加载并初始化Bean </p>
</li>
<li><p>-ApplicationContext保存了Bean对象并在Spring中被广泛使用 </p>
</li>
</ul>
<p><strong>方式，ApplicationContext </strong></p>
<ul>
<li><p>-本地文件 </p>
</li>
<li><p>-Classpath </p>
</li>
<li><p>-Web应用中依赖servlet或Listener </p>
</li>
</ul>
<p><strong>Bean容器初始化</strong></p>
<ul>
<li>·文件 </li>
</ul>
<pre><code class="lang-java">FileSystemXmlApplicationContext context= <span class="hljs-keyword">new</span> FileSystemXmlApplicationContext(<span class="hljs-string">"F:/workspace/appcontext.xml"</span>);
</code></pre>
<ul>
<li>·Classpath </li>
</ul>
<pre><code class="lang-java">caspatxnlApplicstionc ontext context= <span class="hljs-keyword">new</span> ClaspathxmlAplicationcontextrclasspathispring-contextxml);
</code></pre>
<ul>
<li>.Web应用 </li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>
        org.springframework.web.context.ContextLoaderListener
    <span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>context<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>
        org.springframework.web.context.ContextLoaderServlet
    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
</code></pre>
</blockquote>
<h2 id="spring的常用注入方式">3.3 Spring的常用注入方式</h2>
<blockquote>
<p><strong>Spring注入</strong></p>
<ul>
<li><p>Spring注入是指在启动Spring容器加载bean配置的时候，完成对变量的赋值行为 </p>
</li>
<li><p>常用的两种注入方式 </p>
<ul>
<li>-设值注入 </li>
</ul>
</li>
</ul>
<pre><code class="lang-xml"> <span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span>encoding=<span class="hljs-string">"UTF-8?&gt;</span></span> 
 <span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http:/www.springframework.org/schema/beans"</span>             
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"htto://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http:/www.springframework.org/schema/beans 
         http:/www.springframeworkorg/schema/beans/spring-beans.xsd"</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"injectionService"</span><span class="hljs-string">class='com.imooc.ioc.injection.service.InjiectionServicelmp</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"injection0AO"</span><span class="hljs-string">ref=tipjection0Ag'1p&lt;</span>/<span class="hljs-attr">property</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">ipjection0AO"class="com.imooc.iodinjiection.dao.lpjection0AOlmp</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> com.imooc.ioc.injection.dao.InjectionDAO; 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InjectionServicelmpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InjectionService</span></span>{ 
    <span class="hljs-keyword">private</span> InjectionDAO injectionDAO; 
    <span class="hljs-comment">//设值注入 </span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setlnjectionDAO</span><span class="hljs-params">(InjectionDAO injectionDAO)</span>
    </span>{ 
        <span class="hljs-keyword">this</span>.injectionDAO=injectionDAO; 
    } 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(String arg)</span>
    </span>{ 
        <span class="hljs-comment">//模拟业务操作 </span>
        System.outprintin(CService接收参数：+arg); 
        arg=arg +<span class="hljs-string">":"</span>+<span class="hljs-keyword">this</span>.hashCode0; 
        injectionDAO.save(arg);
    }
}
</code></pre>
<p>​    -构造注入 </p>
<pre><code class="lang-xml"> <span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span>encoding=<span class="hljs-string">"UTF-8?&gt;</span></span> 
 <span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http:/www.springframework.org/schema/beans"</span>             
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"htto://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http:/www.springframework.org/schema/beans 
         http:/www.springframeworkorg/schema/beans/spring-beans.xsd"</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"injectionService"</span><span class="hljs-string">class='com.imooc.ioc.injection.service.InjiectionServicelmp</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"injection0AO"</span><span class="hljs-string">ref=iniection0AQ</span>&gt;</span>I<span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">ipjection0AO"class="com.imooc.iodinjiection.dao.lpjection0AOlmp</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> com.imooc.ioc.injection.dao.InjectionDAO; 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InjectionServicelmpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InjectionService</span></span>{ 
    <span class="hljs-keyword">private</span> InjectionDAO injectionDAO; 
    <span class="hljs-comment">//构造器注入 </span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InjectionServicelmpl</span><span class="hljs-params">(InjectionDAO injectionDAO)</span>
    </span>{ 
        <span class="hljs-keyword">this</span>.injectionDAO=injectionDAO;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(String arg)</span>
    </span>{ 
        <span class="hljs-comment">//模拟业务操作 </span>
        System.outprintin(CService接收参数：+arg); 
        arg=arg +<span class="hljs-string">":"</span>+<span class="hljs-keyword">this</span>.hashCode0; 
        injectionDAO.save(arg);
    }
}
</code></pre>
</blockquote>
<h1 id="spring-bean装配">4 Spring Bean装配</h1>
<blockquote>
<p><a href="https://juejin.im/post/5d5a48615188257c7d1648ae" target="_blank">Bean装配，从Spring到Spring Boot</a></p>
<p><strong>Bean配置项</strong></p>
<ul>
<li>Class </li>
<li>Scope </li>
<li>Constructor </li>
<li>arguments </li>
<li>Properties </li>
<li>Autowiring </li>
<li>mode </li>
<li>lazy-initialization mode </li>
<li>Initialization/destruction method </li>
</ul>
<p><strong>Bean的作用域</strong></p>
<ul>
<li>singleton:单例，指一个Bean容器中只存在一份 </li>
<li>prototype：每次请求（每次使用）创建新的实例，destroy 方式不生效 </li>
<li>request:每次http请求创建一个实例且仅在当前request内 有效 </li>
<li>session:同上，每次http请求创建，当前session内有效 </li>
<li>global session:基于portlet的web中有效（portlet定义了 global session),如果是在web中，同session </li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"beanScope"</span><span class="hljs-string">class="com.imooc.bean.BeanScope"</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">singletor'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code></pre>
</blockquote>
<h2 id="bean的生命周期">4.1 Bean的生命周期</h2>
<blockquote>
<p><strong>生命周期</strong></p>
<ul>
<li><p>-定义 </p>
</li>
<li><p>-初始化</p>
<ul>
<li>-实现org.springframework.beans.factory.InitializingBean接口 ，覆盖afterPropertiesSet方法 </li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExamplelnitializingBean</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InitializingBean</span></span>{ 
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> afterPropertiesSet0 <span class="hljs-keyword">throws</span> Exception{ 
        <span class="hljs-comment">//do something</span>
    }
}
</code></pre>
<ul>
<li>-配置init-method</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"exampleInitBean"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"examples.ExampleBean"</span> <span class="hljs-attr">init-method</span>=<span class="hljs-string">"init"</span>/〉
</span></code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleBean</span> </span>{ 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>{ 
        <span class="hljs-comment">//do some initialization work </span>
    }
}
</code></pre>
</li>
<li><p>-使用 </p>
</li>
<li><p>-销毁 </p>
<ul>
<li><p>-实现org.springframework.beans.factory.DisposableBean接口 ，覆盖destroy方法 </p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleDisposableBean</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">DisposableBean</span></span>{ 
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> destroy0 <span class="hljs-keyword">throws</span> Exception{ 
        <span class="hljs-comment">//do something</span>
    }
}
</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>配置destroy-method </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"exampleInitRean"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"examples.ExampleBean"</span><span class="hljs-string">destroy-method="cleanup"</span>/&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleBean</span> </span>{ 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span>{ 
        <span class="hljs-comment">//do some destruction work (like releasing pooled connections) </span>
    }
}
</code></pre>
</li>
</ul>
<ul>
<li><p>配置全局默认初始化、销毁方法 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-number">1.0</span><span class="hljs-string">"encoding='UTF-8?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http:/www.springframework.org/schema/beans"</span> 
        <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XML Schema-instance"</span> 
        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframeworkorg/schema/beans 
        http:/www.springframework.org/schema/beans/spring-beans.xsd"</span>
        <span class="hljs-attr">default-init-method</span>=<span class="hljs-string">"init"</span><span class="hljs-string">default-destroy-method="destroys"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
</li>
<li><p>优先顺序  </p>
<ul>
<li>InitializingBean和DisposableBean(定义完需实现)</li>
<li>配置init-method和destroy-method(定义完需实现)</li>
<li>默认(可选)</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="aware接口">4.2 Aware接口</h2>
<blockquote>
<ul>
<li>Spring中提供了一些以Aware结尾的接口，实现了Aware接 口的bean在被初始化之后，可以获取相应资源 </li>
<li>通过Aware接口，可以对Spring相应资源进行操作（一定要慎 重） </li>
<li>为对Spring进行简单的扩展提供了方便的入口 </li>
</ul>
<p><a href="https://www.jianshu.com/p/c5c61c31080b" target="_blank">Spring中的aware接口</a></p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.BeanNameAware;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContextAware;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoocBeanName</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanNameAware</span>, <span class="hljs-title">ApplicationContextAware</span> </span>{
   <span class="hljs-keyword">private</span> String beanName;

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBeanName</span><span class="hljs-params">(String name)</span> </span>{
       <span class="hljs-keyword">this</span>.beanName = name;
       System.out.println(<span class="hljs-string">"MoocBeanName : "</span> + name);
   }

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span>
           <span class="hljs-keyword">throws</span> BeansException </span>{
       System.out.println(<span class="hljs-string">"setApplicationContext : "</span> + applicationContext.getBean(<span class="hljs-keyword">this</span>.beanName).hashCode());
   }
}
</code></pre>
</blockquote>
<h2 id="bean的自动装配">4.3 Bean的自动装配</h2>
<blockquote>
<p><strong>Bean的自动装配（Autowiring)</strong> </p>
<ul>
<li><p>No:不做任何操作 </p>
</li>
<li><p>byName:根据属性名自动装配。此选项将检查容器并根据名字 查找与属性完全一致的bean，并将其与属性自动装配 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd"</span> 
    <span class="hljs-attr">default-autowire</span>=<span class="hljs-string">"byName"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoWiringService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringService"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoWiringDAO"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringDAO"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoWiringDAO</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">(String word)</span> </span>{
        System.out.println(<span class="hljs-string">"AutoWiringDAO : "</span> + word);
    }
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoWiringService</span> </span>{
    <span class="hljs-keyword">private</span> AutoWiringDAO autoWiringDAO;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAutoWiringDAO</span><span class="hljs-params">(AutoWiringDAO autoWiringDAO)</span> </span>{
        System.out.println(<span class="hljs-string">"setAutoWiringDAO"</span>);
        <span class="hljs-keyword">this</span>.autoWiringDAO = autoWiringDAO;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">(String word)</span> </span>{
        <span class="hljs-keyword">this</span>.autoWiringDAO.say(word);
    }
}
</code></pre>
</li>
<li><p>byType:如果容器中存在一个与指定属性类型相同的bean，那 么将与该属性自动装配；如果存在多个该类型bean，那么抛出 异常，并指出不能使用byType方式进行自动装配；如果没有找 到相匹配的bean，则什么事都不发生 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd"</span> 
    <span class="hljs-attr">default-autowire</span>=<span class="hljs-string">"byType"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoWiringService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringService"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoWiringDAO"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringDAO"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
<span class="hljs-comment">&lt;!--autoWiringDAO  也可以是其它名字不影响， 甚至删除也可以--&gt;</span>
</code></pre>
</li>
<li><p>Constructor:与byType方式类似，不同之处在于它应用于构造器参数。如果容器中没有找到与构造器参数类型一致的bean，那么抛出异常 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd"</span> 
    <span class="hljs-attr">default-autowire</span>=<span class="hljs-string">"constructor"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoWiringService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringService"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.autowiring.AutoWiringDAO"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoWiringService</span> </span>{
    <span class="hljs-keyword">private</span> AutoWiringDAO autoWiringDAO;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AutoWiringService</span><span class="hljs-params">(AutoWiringDAO autoWiringDAO)</span> </span>{
        System.out.println(<span class="hljs-string">"AutoWiringService"</span>);
        <span class="hljs-keyword">this</span>.autoWiringDAO = autoWiringDAO;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">(String word)</span> </span>{
        <span class="hljs-keyword">this</span>.autoWiringDAO.say(word);
    }
}
</code></pre>
</li>
</ul>
</blockquote>
<h2 id="bean的resources">4.4 Bean的Resources</h2>
<blockquote>
<p><strong>针对于资源文件的统一接口Resources</strong></p>
<ul>
<li>-UrlResource：URL对应的资源，根据一个URL地址即可构建 </li>
<li>-ClassPathResource：获取类路径下的资源文件 </li>
<li>-FileSystemResource:获取文件系统里面的资源 </li>
<li>-ServletContextResource:ServletContext封装的资源，用于访问ServletContext环境下的资源 </li>
<li>-InputStreamResource:针对于输入流封装的资源 </li>
<li>-ByteArrayResource:针对于字节数组封装的资源 </li>
</ul>
<p><strong>ResourceLoader</strong> </p>
<ul>
<li><p>所有的application contexts都实现了ResourceLoader接口，因此在Resource实例中都可以使用application contexts。</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ResourceLoader</span></span>{
   <span class="hljs-function">Resource <span class="hljs-title">getResource</span><span class="hljs-params">(String location)</span></span>;
}
Resource template=ctx.getResource(<span class="hljs-string">"some/resource/path/myTemplate.txt"</span>);
Resource template=ctx.getResource(<span class="hljs-string">"classpath:some/resource/path/myTemplate.txt"</span>);
Resource template=ctx.getResource(<span class="hljs-string">"file:/some/resource/path/myTemplate.txt"</span>);
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContextAware;
<span class="hljs-keyword">import</span> org.springframework.core.io.Resource;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoocResource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ApplicationContextAware</span>  </span>{
   <span class="hljs-keyword">private</span> ApplicationContext applicationContext;
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span>
           <span class="hljs-keyword">throws</span> BeansException </span>{
       <span class="hljs-keyword">this</span>.applicationContext = applicationContext;
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">resource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
       Resource resource = applicationContext.getResource(<span class="hljs-string">"config.txt"</span>);
       System.out.println(resource.getFilename());
       System.out.println(resource.contentLength());
   }
}
</code></pre>
</li>
</ul>
</blockquote>
<h2 id="bean的定义及作用域">4.5 Bean的定义及作用域</h2>
<blockquote>
<p><strong>Classpath扫描与组件管理</strong></p>
<ul>
<li>从Spring3.0开始，Spring JavaConfig项目提供了很多特性 ，包括使用java而不是XML定义bean，比如@Configuration,@Bean,@Import,@DependsOn </li>
<li>@Component是一个通用注解，可用于任何bean </li>
<li>@Repository,@Service,@Controller是更有针对性的注解 <ul>
<li>-@Repository通常用于注解DAO类，即持久层 </li>
<li>-@Service通常用于注解Service类，即服务层 </li>
<li>-@Controller通常用于Controller类，即控制层（MVC）</li>
</ul>
</li>
</ul>
<p><strong>类的自动检测及Bean的注册</strong></p>
<ul>
<li>·Spring可以自动检测类并注册Bean到ApplicationContext中</li>
</ul>
<pre><code class="lang-java"><span class="hljs-meta">@Service</span> 
bublic <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleMovielister</span></span>{ 
<span class="hljs-keyword">private</span> MovieFinder movieFinder; 
<span class="hljs-meta">@Autovired</span> 
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SimpleMovieLister</span><span class="hljs-params">(MovieFinder movieFinder)</span></span>{ 
    <span class="hljs-keyword">this</span>.movieFinder=movieFinder;
}
}

<span class="hljs-meta">@Repository</span> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JpaMovieFinder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MovieFinder</span></span>{ 
    <span class="hljs-comment">//implementation elided for clarity</span>
}
</code></pre>
<p><strong>context:annotation-config</strong> </p>
<ul>
<li><p>通过在基于XML的Spring配置如下标签（请注意包含上下文 命名空间） </p>
</li>
<li><p>\<context:annotation-config>仅会查找在同一个applicatcontext中的Bean注解</context:annotation-config></p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
 <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
 <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
 <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context.xsd"</span> &gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
</li>
</ul>
<p><strong>类的自动检测及Bean的注册</strong></p>
<ul>
<li>为了能够检测这些类并注册相应的Bean，需要下面内容</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"org.example"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<ul>
<li><p>\<context:component-scan>包含<context:annotation- config="">，通常在使用前者后，不用再使用后者，前者包含后者全部功能</context:annotation-></context:component-scan></p>
</li>
<li><p>AutowiredAnnotationBeanPostProcessor和 CommonAnnotationBeanPostProcessor也会被包含进来</p>
</li>
</ul>
<p><strong>使用过滤器进行自定义扫描</strong></p>
<ul>
<li><p>默认情况下，类被自动发现并注册bean的条件是：使用 @Component,@Repository,@Service,@Controller注解或者使用@Component的自定义注解 </p>
</li>
<li><p>可以通过过滤器修改上面的行为，如:下面例子的XML配置忽略所有的@Repository注解并用“Stub”代替</p>
</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"org.example"</span>&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">context:include-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"regex"</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">".*Stub.*Repository"</span>/&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"annotation"</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"org.springframework.stereotype.Repository"</span>/&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<ul>
<li>还可使用use-default-filters="false"禁用自动发现与注册</li>
</ul>
<p><strong>定义Bean</strong></p>
<ul>
<li>扫描过程中组件被自动检测，那么Bean名称是由 BeanNameGenerator生成的（@Component, @Repository,@Service,@Controller都会有个name属性用 于显式设置Bean Name) </li>
</ul>
<pre><code class="lang-java"><span class="hljs-meta">@Service</span>(<span class="hljs-string">"myMovieLister"</span>)
Repository <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleMovieLister</span> </span>{}
<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieFinderImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MovieFinder</span></span>{}
</code></pre>
<ul>
<li>可自定义bean命名策略，实现BeanNameGenerator接口， 并一定要包含一个无参数构造函器</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"org.example"</span> <span class="hljs-attr">name-generator</span>=<span class="hljs-string">"org.example.MyNameGenerator"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<p><strong>作用域（Scope)</strong></p>
<ul>
<li>通常情况下自动查找的Spring组件，其scope是singleton，Spring2.5提供了一个标识scope的注解@Scope</li>
</ul>
<pre><code class="lang-java"><span class="hljs-meta">@Scope</span>(<span class="hljs-string">"prototype"</span>) 
<span class="hljs-meta">@Repository</span> 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieFinderImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MovieFinder</span></span>{}
</code></pre>
<ul>
<li>也可以自定义scope策略，实现ScopeMetadataResolver接 口并提供一个无参构造器，比如在多线程中</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"org.example” scope-resolver="</span><span class="hljs-string">org.example.MyScopeResolver"</span>/&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<ul>
<li><p>proxyMode属性</p>
<pre><code class="lang-java"><span class="hljs-meta">@Scope</span>(<span class="hljs-string">"prototype"</span> proxyMode=ScopedProxyMode.TARGET_CLASS )
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieFinderImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MovieFinder</span></span>{}
</code></pre>
</li>
</ul>
</blockquote>
<h2 id="autowired注解说明">4.6 Autowired注解说明</h2>
<blockquote>
<p><strong>@Required</strong></p>
<ul>
<li><p>@Required注解适用于bean属性的setter方法 </p>
</li>
<li><p>这个注解仅仅表示，受影响的bean属性必须在配置时被填充， 通过在bean定义或通过自动装配一个明确的属性值 </p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleMovieLister</span> </span>{
<span class="hljs-keyword">private</span> MovieFinder movieFinder; 
    <span class="hljs-meta">@Required</span> 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMovieFinder</span><span class="hljs-params">(MovieFinder movieFinder)</span></span>{ 
        <span class="hljs-keyword">this</span>.movieFinder=movieFinder; 
    }
}
</code></pre>
</li>
</ul>
<p><strong>@Autowired</strong></p>
<ul>
<li><p>可以将@Autowired注解为“传统"的setter方法 </p>
<pre><code class="lang-java"><span class="hljs-keyword">private</span> MovieFinder movieFinder; 
    <span class="hljs-meta">@Autovired</span> 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMovieFinder</span><span class="hljs-params">(MovieFinder movieFinder)</span>
    </span>{ 
        <span class="hljs-keyword">this</span>.moviesinder=movieFinder; 
    }
}
</code></pre>
</li>
<li><p>可用于构造器或成员变量 </p>
<pre><code class="lang-java"><span class="hljs-meta">@Autovired</span> 
<span class="hljs-keyword">private</span> MovieCatalog movieCatalog; 
<span class="hljs-keyword">private</span> CustomerPreferenceDao customerPreferenceDao; 
<span class="hljs-meta">@Autovired</span> 
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieRecommender</span><span class="hljs-params">(CustomerPreferenceDao customerPreferenceDao)</span></span>{ 
    <span class="hljs-keyword">this</span>.customerPreferenceDao=customerPreferenceDao;
}
</code></pre>
</li>
<li><p>默认情况下，如果因找不到合适的bean将会导致autowiring 失败抛出异常，可以通过下面的方式避免</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">simpleMovieLister</span></span>{ 
    <span class="hljs-keyword">private</span> MovieFinder movieFinder; 
    <span class="hljs-meta">@Autovired</span>(required=<span class="hljs-keyword">false</span>) 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMovieFinder</span><span class="hljs-params">(MovieFinder movieFinder)</span></span>{ 
        <span class="hljs-keyword">this</span>.movieFinder=movieFinder;
    }
}
</code></pre>
</li>
<li><p>每个类只能有一个构造器被标记为required=true </p>
</li>
<li><p>@Autowired的必要属性，建议使用@Required注解 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.imooc.beanannotation"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> com.imooc.beanannotation.injection.dao.InjectionDAO;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InjectionServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InjectionService</span> </span>{
    <span class="hljs-comment">// 方式一</span>
    <span class="hljs-comment">// @Autowired</span>
    <span class="hljs-keyword">private</span> InjectionDAO injectionDAO;

    <span class="hljs-comment">// 方式二</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InjectionServiceImpl</span><span class="hljs-params">(InjectionDAO injectionDAO)</span> </span>{
        <span class="hljs-keyword">this</span>.injectionDAO = injectionDAO;
    }

    <span class="hljs-comment">// 方式三</span>
    <span class="hljs-comment">// @Autowired</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInjectionDAO</span><span class="hljs-params">(InjectionDAO injectionDAO)</span> </span>{
        <span class="hljs-keyword">this</span>.injectionDAO = injectionDAO;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">(String arg)</span> </span>{
        System.out.println(<span class="hljs-string">"Service接收参数："</span> + arg);
        injectionDAO.save(arg + <span class="hljs-string">":"</span> + <span class="hljs-keyword">this</span>.hashCode());
    }
}
</code></pre>
</li>
<li><p>可以使用@Autowired注解那些众所周知的解析依赖性接口， 比如：BeanFactory，ApplicationContext,Environment, ResourceLoader,ApplicationEventPublisher,and MessageSource </p>
</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieRecommender</span> </span>{ 
<span class="hljs-meta">@Autovired</span> <span class="hljs-keyword">private</span> ApplicationContext context; 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieRecommender</span><span class="hljs-params">()</span></span>{}
}
</code></pre>
<ul>
<li>可以通过添加注解给需要该类型的数组的字段或方法，以提供ApplicationContext中的所有特定类型的bean</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">private</span> Set&lt;Moviecatalog&gt; movieCatalogs; 
<span class="hljs-meta">@Autovired</span> 
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seMovieCatalogs</span><span class="hljs-params">(Set&lt;MovieCatalog&gt; movieCatalogs)</span></span>{( 
<span class="hljs-keyword">this</span>.movieCatalogs=movieCatalogs;
}
</code></pre>
<ul>
<li>可以用干装配kew为string的Map</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">private</span> Map&lt;String,Movlecatalog&gt; moviecatalogs; 
<span class="hljs-meta">@Aucovired</span> 
<span class="hljs-function">pablic <span class="hljs-keyword">void</span> <span class="hljs-title">setMovieCatalogs</span><span class="hljs-params">(Map&lt;String,MovieCatalog &gt; movieCatalogs)</span></span>{
    <span class="hljs-keyword">this</span>.movieCatalogs=movieCatalogs;
}
</code></pre>
<ul>
<li><p>如果希望数组有序，可以让bean实现 org.springframework.core.Ordered接口或使用的@Order注解，并且只针对数组有效</p>
</li>
<li><p>@Autowired是由Spring BeanPostProcessor处理的，所以不能在自己的BeanPostProcessor或 BeanFactoryPostProcessor类型应用这些注解，这些类型必须通过XML或者Spring的@Bean注解加载</p>
</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BeanInterface</span> </span>{}

<span class="hljs-keyword">import</span> org.springframework.core.annotation.Order;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-meta">@Order</span>(<span class="hljs-number">2</span>)
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanImplOne</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanInterface</span> </span>{
}
<span class="hljs-meta">@Order</span>(<span class="hljs-number">1</span>)
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanImplTwo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanInterface</span> </span>{
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanInvoker</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> List&lt;BeanInterface&gt; list;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> != list &amp;&amp; <span class="hljs-number">0</span> != list.size()) {
            System.out.println(<span class="hljs-string">"list..."</span>);
            <span class="hljs-keyword">for</span> (BeanInterface bean : list) {
                System.out.println(bean.getClass().getName());
            }
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"List&lt;BeanInterface&gt; list is null"</span>);
        }
    }
}

list...
com.imooc.beanannotation.multibean.BeanImplTwo
com.imooc.beanannotation.multibean.BeanImplOne
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanInvoker</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Map&lt;String, BeanInterface&gt; map;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> != map &amp;&amp; <span class="hljs-number">0</span> != map.size()) {
            System.out.println(<span class="hljs-string">"map..."</span>);
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, BeanInterface&gt; entry : map.entrySet()) {
                System.out.println(entry.getKey() + <span class="hljs-string">"      "</span> + entry.getValue().getClass().getName());
            }
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"Map&lt;String, BeanInterface&gt; map is null"</span>);
        }
    }
}

map...
beanImplTwo  com.imooc.beanannotation.multibean.BeanImplTwo
beanImplOne  com.imooc.beanannotation.multibean.BeanImplOne
</code></pre>
</blockquote>
<h2 id="qualifier注解">4.7 @Qualifier注解</h2>
<blockquote>
<ul>
<li><p>按类型自动装配可能多个bean实例的情况，可以使用Spring的@Qualifier注解缩小范围(或指定唯一)，也可以用于指定单独的构造器参数或方法参数 </p>
</li>
<li><p>可用于注解集合类型变量</p>
</li>
<li><p>主要由xml定义和java注解实现这两种方式</p>
</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"example.SimpleMovieCatalog"</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">qualifier</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"main"</span>/&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"example.SimpleMovieCatalog"</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">qualifier</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"action"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code></pre>
<ul>
<li>如果通过名字进行注解注入，主要使用的不是@Autowired( 即使在技术上能够通过@Qualifier定bean的名字），替代方式是使用JSR-250@Resource注解，它是通过其独特的名称 来定义来识别特定的目标（这是一个与所声明的类型是无关的 匹配过程）</li>
<li>因语义差异，集合或Map类型的bean无法通过@Autowired 来注入，因为没有类型匹配到这样的bean，为这些bean使用 @Resource注解，通过唯一名称引用集合或Map的bean </li>
<li>@Autowired适用于fields,constructors,multi-argument methods这些允许在参数级别使用@Qualifier注解缩小范围的情况 </li>
<li>@Resource适用于成员变量、只有一个参数的setter方法，所以在目标是构造器或一个多参数方法时，最好的方式是使用qualifiers</li>
<li>可以定义自己的Qualifier</li>
</ul>
<pre><code class="lang-java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanImplOne</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanInterface</span> </span>{
}
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanImplTwo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanInterface</span> </span>{
}

<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanInvoker</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier</span>(<span class="hljs-string">"beanImplTwo"</span>)
    <span class="hljs-keyword">private</span> BeanInterface beanInterface;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> != beanInterface) {
            System.out.println(beanInterface.getClass().getName());
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"beanInterface is null..."</span>);
        }
    }
}

com.imooc.beanannotation.multibean.BeanImplTwo
</code></pre>
</blockquote>
<h2 id="基于java的容器注解">4.8 基于Java的容器注解</h2>
<blockquote>
<ul>
<li><p>@Bean标识一个用于配置和初始化一个由SpringloC容器管理的新对象的方法，类似于XML配置文件的<bean> </bean></p>
</li>
<li><p>可以在Spring的@Component注解的类中使用@Bean注解 任何方法（仅仅是可以）</p>
</li>
<li><p>上一点中，通常使用的是@Configuration </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.acme.services.MyServiceImp1"</span>/&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<p>等价于</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StoreConfig</span> </span>{
    <span class="hljs-comment">// 若没有指明name，则默认为方法名</span>
    <span class="hljs-comment">// @Bean</span>
    <span class="hljs-meta">@Bean</span>(name=<span class="hljs-string">"stringStore"</span> initMethod=<span class="hljs-string">"init"</span> destoryMethod=<span class="hljs-string">"cleanup"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> StringStore <span class="hljs-title">stringStore</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StringStore();
    }
}
</code></pre>
</li>
</ul>
<p><strong>使用@ImportResource和@Value 注解进行资源文件读取</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">"classpath:/com/acme/jdbc.properties"</span>/&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.acme.AppConfig"</span>/&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">lWorg.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.url}"</span>/&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.username}"</span>/&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"S{jdbc.password)"</span>/&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<p>等价于</p>
<pre><code class="lang-java"><span class="hljs-meta">@Configuration</span> 
ImportResource(<span class="hljs-string">"classpath:/com/acme/properties-config.xm1"</span>) 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppConfig</span></span>{
    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$(jdbc.url)"</span>) 
    <span class="hljs-keyword">private</span> String url; 
    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$(jdbc.username)"</span>) 
    <span class="hljs-keyword">private</span> String username; 
    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"jdbc.password)"</span>) 
    <span class="hljs-keyword">private</span> String password; 

    <span class="hljs-meta">@Bean</span> 
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span></span>{ 
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DriverManagerDataSource(url,username,password); 
    }
}
</code></pre>
<pre><code class="lang-properties"># properties-config.xm1

jdbc.username=root
password=root
url=127.00.1
</code></pre>
</blockquote>
<h2 id="基于泛型的装配">4.9 基于泛型的装配</h2>
<p>&gt;
&gt;</p>
<blockquote>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Store</span>&lt;<span class="hljs-title">T</span>&gt; </span>{}
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringStore</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Store</span>&lt;<span class="hljs-title">String</span>&gt; </span>{}
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntegerStore</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Store</span>&lt;<span class="hljs-title">Integer</span>&gt; </span>{}


<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.ImportResource;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ImportResource</span>(<span class="hljs-string">"classpath:config.xml"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StoreConfig</span> </span>{
   <span class="hljs-meta">@Autowired</span>
   <span class="hljs-keyword">private</span> Store&lt;String&gt; s1;
   <span class="hljs-meta">@Autowired</span>
   <span class="hljs-keyword">private</span> Store&lt;Integer&gt; s2;

   <span class="hljs-meta">@Bean</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> StringStore <span class="hljs-title">stringStore</span><span class="hljs-params">()</span> </span>{
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StringStore();
   }
   <span class="hljs-meta">@Bean</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> IntegerStore <span class="hljs-title">integerStore</span><span class="hljs-params">()</span> </span>{
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> IntegerStore();
   }
   <span class="hljs-meta">@Bean</span>(name = <span class="hljs-string">"stringStoreTest"</span>)
   <span class="hljs-function"><span class="hljs-keyword">public</span> Store <span class="hljs-title">stringStoreTest</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"s1 : "</span> + s1.getClass().getName());
       System.out.println(<span class="hljs-string">"s2 : "</span> + s2.getClass().getName());
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StringStore();
   }
}
</code></pre>
<p><strong>CustomAutowireConfigurer</strong></p>
<ul>
<li><p>CustomAutowireConfigurer是 BeanFactoryPostProcessor的子类，通过它可以注册自己的 qualifier注解类型（即使没有使用Spring的@Qualifier 注解）</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"customAutowireConfigurer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.beans.factory.annotation.CustomAutowireConfigurer"</span>&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"customQualifierTypes"</span>&gt;</span> 
       <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span> 
           <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>example.CustomQualifier<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> 
       <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span> 
   <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code></pre>
</li>
</ul>
<ul>
<li><p>该AutowireCandidateResolver决定自动装配的候选者</p>
<ul>
<li>-每个bean定义的autowire-candidate值 </li>
<li>-任何<bean>中的default-autowire-candidates </bean></li>
<li>-@Qualifier注解及使用CustomAutowireConfigurer的自定义类型</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="jsr支持说明">4.10 JSR支持说明</h2>
<h1 id="spring-aop基本概念">5 Spring AOP基本概念</h1>
<blockquote>
<p><a href="https://blog.csdn.net/fygu18/article/details/79989862" target="_blank">Spring AOP是什么?你都拿它做什么?</a></p>
</blockquote>
<h2 id="aop基本概念和特点">5.1 AOP基本概念和特点</h2>
<blockquote>
<p><strong>什么是AOP</strong></p>
<ul>
<li>AOP：Aspect Oriented Programming的缩写，意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能 的统一维护的一种技术 </li>
<li>主要的功能是：日志记录，性能统计，安全控制，事务处理， 异常处理等等 </li>
</ul>
<p><a data-lightbox="8ba57da9-77f9-4ed9-a0a1-70a506be2b2e" data-title="AOP切面示意图" href="res/Java%20And%20Spring%20Annotation/AOP%E5%88%87%E9%9D%A2%E7%A4%BA%E6%84%8F%E5%9B%BE.png"><img alt="AOP切面示意图" src="res/Java%20And%20Spring%20Annotation/AOP%E5%88%87%E9%9D%A2%E7%A4%BA%E6%84%8F%E5%9B%BE.png"/></a></p>
<p><strong>AOP实现方式</strong></p>
<ul>
<li>预编译 <ul>
<li>-AspectJ </li>
</ul>
</li>
<li>运行期动态代理（JDK动态代理、CGLib动态代理） <ul>
<li>-SpringAOP</li>
<li>JbossAOP </li>
</ul>
</li>
</ul>
<p><strong>AOP几个相关概念</strong> </p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>切面(Aspect)</td>
<td>一个关注点的模块化，这个关注点可能会横切多个对象</td>
</tr>
<tr>
<td>连接点(Joinpoint)</td>
<td>程序执行过程中的某个特定的点</td>
</tr>
<tr>
<td>通知(Advice)</td>
<td>在切面的某个特定的连接点上执行的动作</td>
</tr>
<tr>
<td>切入点(Pointcut)</td>
<td>匹配连接点的断言，在AOP中通知和一个切入点表达式关联</td>
</tr>
<tr>
<td>引入(Introduction)</td>
<td>在不修改类代码的前提下，为类添加新的方法和属性</td>
</tr>
<tr>
<td>目标对象(Target Object)</td>
<td>被一个或者多个切面所通知的对象</td>
</tr>
<tr>
<td>AOP代理(AOP Proxy)</td>
<td>AOP框架创建的对象，用来实现切面契约(aspect contract)<br/>(包括通知方法执行等功能）</td>
</tr>
<tr>
<td>织入(Weaving)</td>
<td>把切面连接到其它的应用程序类型或者对象上，并创建一个被通知<br/>的对象，分为：编译时织入、类加载时织入、执行时织入</td>
</tr>
</tbody>
</table>
<p><strong>Advice的类型</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>前置通知(Before advice)</td>
<td>在某连接点(join point)之前执行的通 知，但不能阻止<br/>连接点前的执行(除非它抛出一个异常）</td>
</tr>
<tr>
<td>返回后通知(After returning advice)</td>
<td>(After returning advice)在某连接点(join point)正常完<br/>成后执行的通知</td>
</tr>
<tr>
<td>抛出异常后通知(After throwing advice)</td>
<td>在方法抛出异常退出时执行的通知</td>
</tr>
<tr>
<td>后通知(After((finally) advice)</td>
<td>当某连接点退出的时候执行的通知<br/>(不论是正常返回还是异常退出）</td>
</tr>
<tr>
<td>环绕通知(Around Advice)</td>
<td>包围一个连接点(join point)的通知</td>
</tr>
</tbody>
</table>
<p><strong>Spring框架中AOP的用途</strong></p>
<ul>
<li>提供了声明式的企业服务，特别是EJB的替代服务的声明 </li>
<li>允许用户定制自己的方面，以完成OOP与AOP的互补使用 </li>
</ul>
<p><strong>Spring的AOP实现</strong></p>
<ul>
<li>纯java实现，无需特殊的编译过程，不需要控制类加载器层次 </li>
<li>目前只支持方法执行连接点(通知Spring Bean的方法执行) </li>
<li>不是为了提供最完整的AOP实现(尽管它非常强大)；而是侧重于提供一种AOP实现和Spring IoC容器之间的整合，用于帮助解决企业应用中的常见问题 </li>
<li>Spring AOP不会与AspectU竞争，从而提供综合全面的AOP解决方案 </li>
</ul>
<p><strong>有接口和无接口的Spring AOP实现区别</strong></p>
<ul>
<li>Spring AOP默认使用标准的JavaSE动态代理作为AOP代理， 这使得任何接口(或者接口集)都可以被代理 </li>
<li>Spring AOP中也可以使用CGLIB代理(如果一个业务对象并没有实现一个接口)</li>
</ul>
</blockquote>
<h2 id="配置切面和切入点">5.2 配置切面和切入点</h2>
<blockquote>
<p><strong>Schema-based AOP</strong></p>
<ul>
<li><p>Spring所有的切面和通知器都必须放在一个<aop>内 （可以配置包含多个<aop>元素），</aop></aop></p>
</li>
<li><p>每一个 \<aop:config>可以包含pointcut，advisor和aspect元素 （它们必须按照这个顺序进行声明 )</aop:config></p>
</li>
<li><p>\<aop:config>风格的配置大量使用了Spring的自动代理机制</aop:config></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocAspect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.MoocAspect"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"aspectBiz"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.biz.AspectBiz"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocAspect4op"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"moocAspect"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.imooc.aop.schema.advice.biz.*Biz(..))"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
</code></pre>
<p>| 表达式                                                       | 含义                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| execution(public<em>*(..))                                      | 切入点为执行所有public方法时                                 |
| execution(</em> set<em>(..))                                        | 切入点为执行所有set开始的方法时                              |
| execution(</em> com.service.Service.<em>(..))                       | 切入点为执行AccountService类中的所有方法时                   |
| execution(</em> com.xyz.service..(.))                            | 切入点为执行com.xyz.service包下的所有方法时                  |
| execution(<em> com.xyz.service...(..))                          | 切入点为执行com.xyz.service包及其子包下的所有方法时          |
| within(com.xyz.service.</em>)                                    | (only in Spring AOP)                                         |
| within(com.xyz.service..*)                                   | (only in Spring AOP) <br/>within用于匹配指定类型内的方法执行 |
| this(com.xyz.service.AccountService)                         | (only in Spring AOP)<br/>this用于匹配当前AOP代理对象类型的执行方法 |
| target(com.xyz.service.AccountService)                       | (only in Spring AOP)<br/>target 用于匹配当前目标对象类型的执行方法 |
| @annotation<br/>(org.springframework.transaction.annota tion.Transactional) | (only in Spring AOP)<br/>args 用于匹配当前执行的方法传入的参数为<br/>指定类型的执行方法 |</p>
</li>
</ul>
</blockquote>
<h2 id="advice应用">5.3 Advice应用</h2>
<blockquote>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AspectBiz</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">biz</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"AspectBiz biz."</span>);
<span class="hljs-comment">//        throw new RuntimeException();</span>
   }
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoocAspect</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"MoocAspect before."</span>);
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"MoocAspect afterReturning."</span>);
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterThrowing</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"MoocAspect afterThrowing."</span>);
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"MoocAspect after."</span>);
   }
}
</code></pre>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocAspect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.MoocAspect"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"aspectBiz"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.biz.AspectBiz"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span> 
   <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocAspect4op"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"moocAspect"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.imooc.aop.schema.advice.biz.*Biz(..))"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"before"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"afterReturning"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-throwing</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"afterThrowing"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"after"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span> 
   <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-comment">// 输出</span>
MoocAspect before.
AspectBiz biz.
MoocAspect afterReturning.
MoocAspect after
</code></pre>
<p><strong>Around advice</strong></p>
<ul>
<li><p>通知方法的第一个参数必须是ProceedingJoinPoint类型 </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"around"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"moocPiontcut"</span>/&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> </span>{
       Object obj = <span class="hljs-keyword">null</span>;
       <span class="hljs-keyword">try</span> {
           System.out.println(<span class="hljs-string">"MoocAspect around 1."</span>);
           obj = pjp.proceed();
           System.out.println(<span class="hljs-string">"MoocAspect around 2."</span>);
       } <span class="hljs-keyword">catch</span> (Throwable e) {
           e.printStackTrace();
       }
       <span class="hljs-keyword">return</span> obj;
   }
</code></pre>
</li>
</ul>
<p><strong>Advice parameters</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"aroundInit"</span> 
           <span class="hljs-attr">pointcut</span>=<span class="hljs-string">"execution(* com.imooc.aop.schema.advice.biz.AspectBiz.init(String, int)) and args(bizName, times)"</span>/&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AspectBiz</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">biz</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"AspectBiz biz."</span>);
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(String bizName, <span class="hljs-keyword">int</span> times)</span> </span>{
       System.out.println(<span class="hljs-string">"AspectBiz init : "</span> + bizName + <span class="hljs-string">"   "</span> + times);
   }
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoocAspect</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">aroundInit</span><span class="hljs-params">(ProceedingJoinPoint pjp, String bizName, <span class="hljs-keyword">int</span> times)</span> </span>{
       System.out.println(bizName + <span class="hljs-string">"   "</span> + times);
       Object obj = <span class="hljs-keyword">null</span>;
       <span class="hljs-keyword">try</span> {
           System.out.println(<span class="hljs-string">"MoocAspect aroundInit 1."</span>);
           obj = pjp.proceed();
           System.out.println(<span class="hljs-string">"MoocAspect aroundInit 2."</span>);
       } <span class="hljs-keyword">catch</span> (Throwable e) {
           e.printStackTrace();
       }
       <span class="hljs-keyword">return</span> obj;
   }
}
</code></pre>
</blockquote>
<h2 id="introduction应用">5.4 Introduction应用</h2>
<blockquote>
<ul>
<li><p>允许一个切面声明一个实现指定接口的通知对象，并且提供了一个接口实现类来代表这些对象 </p>
</li>
<li><p>由\<aop:aspect>中的\<aop:declare-parents>元素声明</aop:declare-parents></aop:aspect></p>
</li>
<li><p>该元素用于声明所匹配的类型拥有一个新的parent（因此得名）</p>
</li>
<li><p>schema-defined aspects只支持singleton model </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"moocAspectAOP"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"moocAspect"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">aop:declare-parents</span> 
           <span class="hljs-attr">types-matching</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.biz.*(+)"</span>
           <span class="hljs-attr">implement-interface</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.Fit"</span>
           <span class="hljs-attr">default-impl</span>=<span class="hljs-string">"com.imooc.aop.schema.advice.FitImpl"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Fit</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">filter</span><span class="hljs-params">()</span></span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FitImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Fit</span> </span>{
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">filter</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"FitImpl filter."</span>);
   }
}

<span class="hljs-meta">@Test</span> 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> testFit0{ 
   Fit fit=(Fit)<span class="hljs-keyword">super</span>.getBean(<span class="hljs-string">"aspectBiz"</span>); 
   fit.filter0; 
}

<span class="hljs-comment">// 输出</span>
FitImpl filter.
</code></pre>
</li>
</ul>
</blockquote>
<h2 id="advisors">5.5 Advisors</h2>
<blockquote>
<ul>
<li><p>advisor就像一个小的自包含的方面，只有一个advice </p>
</li>
<li><p>切面自身通过一个bean表示，并且必须实现某个advice 接口，同时，advisor也可以很好的利用AspectJ的切入 点表达式 </p>
</li>
<li><p>Spring通过配置文件中\<aop:advisor>元素支持advisor 实际使用中，大多数情况下它会和transactional advice 配合使用 </aop:advisor></p>
</li>
<li><p>为了定义一个advisor的优先级以便让advice可以有序， 可以使用order属性来定义advisor的顺序 </p>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
   <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
   <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
   <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">"http://www.springframework.org/schema/aop"</span>
   <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd  
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.imooc.aop.schema"</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span>

   <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"concurrentOperationRetry"</span>     
                   <span class="hljs-attr">ref</span>=<span class="hljs-string">"concurrentOperationExecutor"</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"idempotentOperation"</span>
               <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.imooc.aop.schema.advisors.service.*.*(..)) "</span> /&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"idempotentOperation"</span> 
                       <span class="hljs-attr">method</span>=<span class="hljs-string">"doConcurrentOperation"</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>

   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"concurrentOperationExecutor"</span> 
         <span class="hljs-attr">class</span>=<span class="hljs-string">"com.imooc.aop.schema.advisors.ConcurrentOperationExecutor"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxRetries"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"order"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"100"</span> /&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<span class="hljs-keyword">import</span> org.springframework.core.Ordered;
<span class="hljs-keyword">import</span> org.springframework.dao.PessimisticLockingFailureException;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcurrentOperationExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Ordered</span> </span>{
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_MAX_RETRIES = <span class="hljs-number">2</span>;
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> maxRetries = DEFAULT_MAX_RETRIES;
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> order = <span class="hljs-number">1</span>;

   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMaxRetries</span><span class="hljs-params">(<span class="hljs-keyword">int</span> maxRetries)</span> </span>{
       <span class="hljs-keyword">this</span>.maxRetries = maxRetries;
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getOrder</span><span class="hljs-params">()</span> </span>{
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.order;
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOrder</span><span class="hljs-params">(<span class="hljs-keyword">int</span> order)</span> </span>{
       <span class="hljs-keyword">this</span>.order = order;
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">doConcurrentOperation</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
       <span class="hljs-keyword">int</span> numAttempts = <span class="hljs-number">0</span>;
       PessimisticLockingFailureException lockFailureException;
       do {
           numAttempts++;
           System.out.println(<span class="hljs-string">"Try times : "</span> + numAttempts);
           <span class="hljs-keyword">try</span> {
               <span class="hljs-keyword">return</span> pjp.proceed();
           } <span class="hljs-keyword">catch</span> (PessimisticLockingFailureException ex) {
               lockFailureException = ex;
           }
       } <span class="hljs-keyword">while</span> (numAttempts &lt;= <span class="hljs-keyword">this</span>.maxRetries);
       System.out.println(<span class="hljs-string">"Try error : "</span> + numAttempts);
       <span class="hljs-keyword">throw</span> lockFailureException;
   }
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.springframework.dao.PessimisticLockingFailureException;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvokeService</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invoke</span><span class="hljs-params">()</span> </span>{
       System.out.println(<span class="hljs-string">"InvokeService ......"</span>);
   }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeException</span><span class="hljs-params">()</span> </span>{
       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PessimisticLockingFailureException(<span class="hljs-string">""</span>);
   }
}
</code></pre>
<pre><code class="lang-java">@Test 
public void testSave0{ 
   InvokeService service=super.getBeaninvokeService"); 
   service.invoke0; 
   System.out printin0.
   service.invokeException0;
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-comment">// 输出</span>
Try times:<span class="hljs-number">1</span> 
InvokeService... 

Try times:<span class="hljs-number">1</span> 
Try times:<span class="hljs-number">2</span> 
Try times:<span class="hljs-number">3</span> 
Try times:<span class="hljs-number">4</span> 
Try error:<span class="hljs-number">4</span>
</code></pre>
</li>
</ul>
</blockquote>
<p></p><footer class="page-footer"><span class="copyright">Copyright © narutohyc.com 2022 all right reserved，powered by Gitbook</span><span class="footer-modification">该文件修订时间：
2022-02-23 11:11:08
</span></footer><hr/><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el: "#vcomments",appId: 'jQTfSSGRF0zp8yqaaa6bjeVQ-gzGzoHsz',appKey: 'FOXMptWOHC7cU1FxXt0LJj4o',placeholder: 'Just go go',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false})</script><p></p>
</section>
</div>
<div class="search-results">
<div class="has-results">
<h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
<ul class="search-results-list"></ul>
</div>
<div class="no-results">
<h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
</div>
</div>
</div>
</div>
</div>
</div>
<a aria-label="Previous page: Spring注解_常用注解" class="navigation navigation-prev" href="Spring注解_常用注解.html">
<i class="fa fa-angle-left"></i>
</a>
<a aria-label="Next page: Java基础" class="navigation navigation-next" href="Java基础.md">
<i class="fa fa-angle-right"></i>
</a>
</div>
<script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Spring注解_Spring入门篇","level":"1.5.3","depth":2,"next":{"title":"Java基础","level":"1.6","depth":1,"path":"chapters/Java基础.md","ref":"chapters/Java基础.md","articles":[{"title":"Java基础_集合","level":"1.6.1","depth":2,"path":"chapters/Java基础_集合.md","ref":"chapters/Java基础_集合.md","articles":[]},{"title":"Java基础_泛型","level":"1.6.2","depth":2,"path":"chapters/Java基础_泛型.md","ref":"chapters/Java基础_泛型.md","articles":[]},{"title":"Java基础_打jar包","level":"1.6.3","depth":2,"path":"chapters/Java基础_打jar包.md","ref":"chapters/Java基础_打jar包.md","articles":[]},{"title":"Java基础_正则匹配","level":"1.6.4","depth":2,"path":"chapters/Java基础_正则匹配.md","ref":"chapters/Java基础_正则匹配.md","articles":[]},{"title":"Java基础_反射机制","level":"1.6.5","depth":2,"path":"chapters/Java基础_反射机制.md","ref":"chapters/Java基础_反射机制.md","articles":[]},{"title":"Java基础_对象正反序列化","level":"1.6.6","depth":2,"path":"chapters/Java基础_对象正反序列化.md","ref":"chapters/Java基础_对象正反序列化.md","articles":[]},{"title":"Java基础_读取配置文件","level":"1.6.7","depth":2,"path":"chapters/Java基础_读取配置文件.md","ref":"chapters/Java基础_读取配置文件.md","articles":[]},{"title":"Java基础_解析与生成XML","level":"1.6.8","depth":2,"path":"chapters/Java基础_解析与生成XML.md","ref":"chapters/Java基础_解析与生成XML.md","articles":[]},{"title":"Java基础_后台服务器开发","level":"1.6.9","depth":2,"path":"chapters/Java基础_后台服务器开发.md","ref":"chapters/Java基础_后台服务器开发.md","articles":[]},{"title":"Java基础_四舍五入","level":"1.6.10","depth":2,"path":"chapters/Java基础_四舍五入.md","ref":"chapters/Java基础_四舍五入.md","articles":[]}]},"previous":{"title":"Spring注解_常用注解","level":"1.5.2","depth":2,"path":"chapters/Spring注解_常用注解.md","ref":"chapters/Spring注解_常用注解.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","splitter","expandable-chapters-small","anchors","github","github-buttons","donate","sharing-plus","anchor-navigation-ex","mathjax","mermaid-gb3","tbfed-pagefooter","code","favicon","search-plus","-lunr","-search","lightbox","change_girls","theme-comscore","valine","pageview-count","favicon-absolute"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright © narutohyc.com 2022","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"https://github.com/narutohyc"},"splitter":{},"change_girls":{"time":10,"urls":["https://plc.jj20.com/up/allimg/1115/012122143136/220121143136-2.jpg","https://plc.jj20.com/up/allimg/1115/111R1094405/21111P94405-1.jpg"]},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"code":{"copyButtons":true},"donate":{"alipay":"https://i.loli.net/2021/01/12/Cdunm9AoBcHF5MI.png","alipayText":"支付宝打赏","button":"赏","title":"","wechat":"https://i.loli.net/2021/01/12/gmzASfCciIFXTyr.png","wechatText":"微信打赏"},"favicon-absolute":{"appleTouchIconMore":{},"appleTouchIconPrecomposed152":"./chapters/res/other/favicon.ico","appleTouchIconPrecomposedMore":{},"favicon":"./chapters/res/other/favicon.ico"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mermaid-gb3":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":false},"favicon":{},"lightbox":{"jquery":true,"sameUuid":false},"theme-comscore":{},"pageview-count":{},"github-buttons":{"buttons":[{"user":"narutohyc","repo":"bk_jdk","type":"star","size":"small","count":true}]},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"expandable-chapters-small":{},"sharing":{"qq":true,"all":["google","facebook","weibo","twitter","qq","qzone","linkedin","pocket"],"douban":true,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":true,"viber":false,"stumbleupon":false,"qzone":true,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"valine":{"avatar":"","lang":"zh-CN","pageSize":10,"placeholder":"Just go go","recordIP":false,"appId":"jQTfSSGRF0zp8yqaaa6bjeVQ-gzGzoHsz","appKey":"FOXMptWOHC7cU1FxXt0LJj4o"},"search-plus":{}},"theme":"default","author":"narutohyc","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Java相关学习记录","language":"zh-hans","links":{"sidebar":{"我的狗窝":"https://github.com/narutohyc"}},"gitbook":"*","description":"记录 Java 的学习和一些技巧的使用"},"file":{"path":"chapters/Spring注解_Spring入门篇.md","mtime":"2022-02-23T11:11:08.869Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-02-23T11:12:40.232Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>
<script src="../gitbook/gitbook.js"></script>
<script src="../gitbook/theme.js"></script>
<script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
<script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
<script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
<script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
<script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
<script src="../gitbook/gitbook-plugin-lightbox/js/lightbox.min.js"></script>
<script src="../gitbook/gitbook-plugin-change_girls/girls.js"></script>
<script src="../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
<script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
<script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>
</body>
</html>
